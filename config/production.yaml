# ==============================================================================
# GraphSAGE Production Configuration for Memory R1
# ==============================================================================
# Optimized settings for production deployment with focus on inference speed.
# Inherits most settings from default.yaml with production-specific overrides.
# ==============================================================================

# Feature extraction - same as default
features:
  dimensions: 7
  include_entity_features: true
  normalization: 'log'

# Random walks - same as default for consistent embeddings
walks:
  length: 80
  per_node: 10
  context_window: 10
  seed: 42

# Negative sampling - same as default
negatives:
  per_positive: 5
  exponent: 0.75

# Model - same architecture
model:
  hidden_dim: 64
  output_dim: 64
  num_layers: 2
  dropout: 0.0  # No dropout at inference
  aggregator: 'mean'
  normalize_output: true

# Training - production settings
training:
  learning_rate: 0.001
  weight_decay: 0.0
  batch_size: 1024  # Larger batches for faster training
  epochs: 100
  gradient_clip: 1.0
  early_stopping_patience: 15
  min_delta: 0.0001
  seed: 42
  device: 'cuda'
  use_amp: false  # Disabled for numerical stability
  use_compile: true  # Enable for production
  log_every: 50
  checkpoint_every: 5

# Validation
validation:
  val_fraction: 0.1
  metrics:
    - loss
    - neighbor_similarity
    - link_prediction_auc
  validate_every_epoch: true

# Inference - production optimized
inference:
  use_compile: true
  cache_embeddings: true
  batch_size: 2048

# Logging - minimal for production
logging:
  level: 'WARNING'
  log_dir: 'logs'
  use_tensorboard: false
  save_metrics_json: true

# Paths
paths:
  raw_data: 'data/raw'
  processed_data: 'data/processed'
  walks_data: 'data/walks'
  checkpoints: 'checkpoints'
  logs: 'logs'
  exports: 'exports'
